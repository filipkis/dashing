<!DOCTYPE html>
<html>
<script
        src="https://code.jquery.com/jquery-3.1.1.min.js"
        integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.min.js"></script>
<script>
  $(document).ready(function () {
    
    var repeat = function() {
      document.getElementById('time').innerHTML = new Date().getHours() + ":" + new Date().getMinutes();
      kraken();
      sl();
    };
    
    var test = function(data){
      console.log(data);
    }
    
    var kraken = function() {
      $.ajax(
              {
                url:"https://api.kraken.com/0/public/Ticker",
                data: {
                  pair:"XXBTZEUR"
                },
                success: function(data){
                  document.getElementById('btc').innerHTML = parseInt(data.result.XXBTZEUR.a[0]).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits:2})
                },
                error: function(data){
                  console.log(data);
                }
  
              }
      )
    };
    
    var sl = function() {
      $.ajax(
              {
                url:"timetable.json",
                success: function(data){
                  var latest = result[0];
                  var time = moment().add(parseInt(latest.in),'m');
                  latest.at = moment(latest.at);
                  document.getElementById('bus').innerHTML = latest.at.fromNow()
                },
                error: function(data){
                  console.log(data);
                }
              }
      )
    }

    setInterval(repeat,60000);
    
    repeat();
    
  });
  
</script>
<body>
The time is <span id='time'></span>
Next bus is in <span id='bus'></span>
BTC price: â‚¬<span id="btc"></span> 

</body>
</html>